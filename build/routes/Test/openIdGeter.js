var request=require("request");module.exports=function(e){var t="wx3fc2b5ecc62fb706";e.get("/openIdGeter",function(e,o){o.redirect("https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t+"&redirect_uri=http%3A%2F%2Fwww.bfbeducation.com%2Fget_wx_access_token&response_type=code&scope=snsapi_base&state=123#wechat_redirect")}),e.get("/get_wx_access_token",function(e,o){var c=e.query.code;request.get({url:"https://api.weixin.qq.com/sns/oauth2/access_token?appid="+t+"&secret=9aa16bfd1a73d231130e51758036c23c&code="+c+"&grant_type=authorization_code"},function(e,t,c){if(200==t.statusCode){var s=JSON.parse(c),n=(s.access_token,s.openid);o.render("Test/openIdGeter.html",{title:"openId测试 成功"+n})}else console.log(t.statusCode),o.render("Test/openIdGeter.html",{title:"openId测试 失败"})})})};